<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wheely - Principal - registrado</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/wheely_principal_register.css">
    <!-- Leaflet core -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
    <aside class="sidebar">
        <header class="sidebar-header">
            <span class="Logo">Wheely</span>
            <button class="sidebar-toggle" aria-label="Toggle sidebar">
                <span class="material-symbols-rounded">dehaze</span>
            </button>
        </header>

        <div class="sidebar-content">
            <!-- Menu list -->
            <ul class="menu-list">
                <li class="menu-item">
                    <a href="#" class="menu-link active" aria-label="Inicio" id="inicio-trigger">
                        <span class="material-symbols-rounded">home</span>
                        <span class="menu-label">Inicio</span>
                    </a>
                </li>

                <li class="menu-item">
                    <a href="#" class="menu-link" aria-label="Favoritos" id="favoritos-trigger">
                        <span class="material-symbols-rounded">star</span>
                        <span class="menu-label">Favoritos</span>
                    </a>
                </li>
                
                <li class="menu-item">
                    <a href="#" class="menu-link" aria-label="Rutas" id="rutas-trigger">
                        <span class="material-symbols-rounded">directions_bus</span>
                        <span class="menu-label">Rutas</span>
                    </a>
                </li>
                
                <li class="menu-item">
                    <a href="#" class="menu-link" aria-label="Estadísticas">
                        <span class="material-symbols-rounded">analytics</span>
                        <span class="menu-label">Estadísticas</span>
                    </a>
                </li>
                
                <li class="menu-item">
                    <a href="#" class="menu-link" aria-label="Ayuda y Soporte">
                        <span class="material-symbols-rounded">help</span>
                        <span class="menu-label">Ayuda y Soporte</span>
                    </a>
                </li>
            </ul>
        </div>
        
        <!-- Footer section -->
        <div class="sidebar-footer">
            <div class="profile">
                <img src="https://i.pinimg.com/736x/a0/f6/d8/a0f6d8722e2ca13e433591c68bc5401f.jpg" alt="Avatar de usuario" class="avatar">
                <div class="profile-info">
                    <h3 class="name">Usuario</h3>
                    <p class="role">Registrado</p>
                </div>
            </div>
            
            <ul class="menu-list">
                <li class="menu-item">
                    <a href="#" class="menu-link logout-link" aria-label="Cerrar sesión" id="logout-trigger">
                        <span class="material-symbols-rounded">logout</span>
                        <span class="menu-label">Cerrar Sesión</span>
                    </a>
                </li>
            </ul>
        </div>
    </aside>
  
    <!-- Integración de la barra de búsqueda y el mapa -->
    <header class="nav-principal">
        <div class="nav-container">
            <div class="nav-busqueda">
                <input type="text" id="input-busqueda" placeholder="¿A donde deseas ir?">
                <i class="bi bi-search"></i>
            </div>
        </div>
    </header>

    <div class="right-buttons">
        <button class="btn" title="Marcar inicio y fin"><i class="bi bi-geo-alt-fill"></i></button>
        <button class="btn" title="Marcar punto único"><i class="bi bi-geo-alt"></i></button>
        <button class="btn" title="Centrar mapa"><i class="bi bi-crosshair"></i></button>
    </div>

    <!-- Integración del mapa -->
    <div id="mapa-wheely"></div>

    <!-- Panel de Favoritos -->
    <div class="panel-overlay" id="favoritos-overlay"></div>
    <div class="panel-flotante" id="favoritos-panel">
        <div class="panel-header">
            <h2>Favoritos</h2>
            <div class="panel-actions">
                <button class="btn-panel" id="agregar-favorito">Agregar</button>
                <button class="btn-close" id="close-favoritos">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
        </div>
        
        <div class="panel-content" id="favoritos-content">
            <!-- Las rutas favoritas se cargarán dinámicamente aquí -->
            <div class="loading-message">
                <p>Cargando rutas favoritas...</p>
            </div>
        </div>
    </div>

    <!-- Panel de Rutas -->
    <div class="panel-overlay" id="rutas-overlay"></div>
    <div class="panel-flotante" id="rutas-panel">
        <div class="panel-header">
            <h2>Todas las Rutas</h2>
            <div class="panel-actions">
                <button class="btn-panel" id="ver-favoritos">Favoritos</button>
                <button class="btn-close" id="close-rutas">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
        </div>

        <div class="panel-filters">
            <input type="text" class="search-box" placeholder="Buscar ruta por número..." id="search-rutas">
        </div>
        
        <div class="panel-content" id="rutas-content">
            <!-- Las rutas se cargarán dinámicamente aquí -->
            <div class="loading-message">
                <p>Cargando rutas...</p>
            </div>
        </div>
    </div>

    <!-- Paneles de reporte -->
    <!-- PANEL 1: Elección de acción -->
    <div class="panel-overlay" id="reporte-overlay"></div>
    <div class="panel-flotante" id="reporte-panel">
        <div class="panel-header">
            <h2>Ayuda a otros usuarios</h2>
            <button class="btn-close" id="close-reporte">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="panel-content">
            <div class="reporte-opcion" id="btn-ver-noticias">
                <i class="material-symbols-rounded icono-opcion">campaign</i>
                <div>
                    <h4>Ver noticias de ruta</h4>
                    <p>Consulta los reportes recientes de esta ruta</p>
                </div>
            </div>
            <div class="reporte-opcion" id="btn-realizar-reporte">
                <i class="material-symbols-rounded icono-opcion">edit_square</i>
                <div>
                    <h4>Realizar un reporte</h4>
                    <p>Envía una sugerencia o reporta una incidencia</p>
                </div>
            </div>
        </div>
    </div>

    <!-- PANEL 2: Formulario de reporte -->
    <div class="panel-overlay" id="formulario-overlay"></div>
    <div class="panel-flotante" id="formulario-panel">
        <div class="panel-header">
            <h2>Realizar reporte</h2>
            <button class="btn-close" id="close-formulario">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>

        <div class="panel-content">
            <label for="tipo-reporte">Tipo de reporte</label>
            <select id="tipo-reporte">
                <option value="sugerencia">Sugerencia</option>
                <option value="incidencia">Incidencia</option>
            </select>

            <label for="titulo-reporte">Título</label>
            <input type="text" id="titulo-reporte" placeholder="Ej. Desvió en la ruta, falta de paradas...">

            <label for="mensaje-reporte">Descripción</label>
            <textarea id="mensaje-reporte" placeholder="Ej. Calle cerrada DESDE libramiento sur 883 hasta la 2da oriente 295"></textarea>

            <button class="btn-panel" id="enviar-reporte">Enviar reporte</button>
        </div>
    </div>

    <!-- PANEL 3: Noticias de la ruta -->
    <div class="panel-overlay" id="noticias-overlay"></div>
    <div class="panel-flotante" id="noticias-panel">
        <div class="panel-header">
            <h2>Noticias de esta ruta</h2>
            <button class="btn-close" id="close-noticias">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>
        <div class="panel-content" id="lista-noticias">
            <!-- Aquí se llenarán los reportes de los usuarios -->
        </div>
    </div>

    <!-- PANEL DE DETALLE DE RUTA -->
    <div id="detalle-ruta-overlay" class="panel-overlay"></div>
    <div id="detalle-ruta-panel" class="panel-flotante">
        <div class="panel-header">
            <h2 id="detalle-ruta-nombre">Ruta X</h2>
            <button id="close-detalle-ruta" class="btn-close">&times;</button>
        </div>
        <div class="panel-content">
            <p id="detalle-direccion"></p>
            <p id="detalle-tiempo"></p>
            <p id="detalle-manana"></p>
            <p id="detalle-tarde"></p>
            <p id="detalle-noche"></p>
            <div class="ruta-direcciones">
                <button id="btn-mostrar-ida">Ver ida</button>
                <button id="btn-mostrar-regreso">Ver regreso</button>
                <button id="btn-mostrar-ambas">Ver ambas</button>
            </div>
        </div>
<!-- PANEL 2: Formulario de reporte -->
<div class="panel-overlay" id="formulario-overlay"></div>
<div class="panel-flotante" id="formulario-panel">
  <div class="panel-header">
  <h2>Realizar reporte</h2>
  <button class="btn-close" id="close-formulario">
    <span class="material-symbols-rounded">close</span>
  </button>
</div>

<div class="panel-content">
  <label for="tipo-reporte">Tipo de reporte</label>
  <select id="tipo-reporte">
    <option value="sugerencia">Sugerencia</option>
    <option value="incidencia">Incidencia</option>
  </select>

  <label for="titulo-reporte">Título</label>
  <input type="text" id="titulo-reporte" placeholder="Ej. Desvió en la ruta, falta de paradas...">

  <label for="mensaje-reporte">Descripción</label>
  <textarea id="mensaje-reporte" placeholder="Ej. Calle cerrada DESDE libramiento sur 883 hasta la 2da oriente 295"></textarea>

  <button class="btn-panel" id="enviar-reporte">Enviar reporte</button>
</div>
</div>

<!-- PANEL 3: Noticias de la ruta -->
<div class="panel-overlay" id="noticias-overlay"></div>
<div class="panel-flotante" id="noticias-panel">
  <div class="panel-header">
    <h2>Noticias de esta ruta</h2>
    <button class="btn-close" id="close-noticias">
      <span class="material-symbols-rounded">close</span>
    </button>
  </div>
  <div class="panel-content" id="lista-noticias">
    <!-- Aquí se llenarán los reportes de los usuarios -->
  </div>
</div>

<!-- PANEL DE INFORMACIÓN DE RUTA -->
<!-- PANEL DE DETALLE DE RUTA -->
<div id="detalle-ruta-overlay" class="panel-overlay"></div>

<div id="detalle-ruta-panel" class="panel-flotante">
  <div class="panel-header">
    <h2 id="detalle-ruta-nombre">Ruta X</h2>
    <button id="close-detalle-ruta" class="btn-close">&times;</button>
  </div>
  <div class="panel-content">
    <p id="detalle-direccion"></p>
    <p id="detalle-tiempo"></p>
    <p id="detalle-manana"></p>
    <p id="detalle-tarde"></p>
    <p id="detalle-noche"></p>
    <div class="ruta-direcciones">
      <button id="btn-toggle-direccion">Cambiar dirección</button>
        <button id="btn-mostrar-ambas">Ver ambas</button>

    </div>

    <!-- Scripts -->
    <script src="js/wheely-auth-integration.js"></script>
<script src="js/Wheely_principal_registered_user.js"></script>

</body>
</html>